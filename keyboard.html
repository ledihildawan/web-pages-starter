<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>CORE-65 | RGB Chroma Edition</title>
        <style>
            /* --- 1. CSS RESET & GLOBAL --- */
            *,
            *::after,
            *::before {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                -webkit-font-smoothing: antialiased;
            }

            :root {
                --u: 52px;
                --gap: 4px;
                --radius-key: 6px;
                --radius-case: 32px;

                /* Environmental Lighting Light Mode */
                --bg-canvas: #f0f2f5;
                --mesh-1: #e2e8f0;
                --mesh-2: #cbd5e1;
                --mesh-3: #94a3b8;

                --mat-case-base: oklch(0.85 0.01 240);
                --mat-case-slope: oklch(0.9 0.01 240);
                --mat-case-bezel: oklch(0.96 0.01 240);
                --mat-plate-inner: oklch(0.7 0.02 240);

                --key-alpha-base: oklch(0.88 0.01 240);
                --key-alpha-top: oklch(0.98 0.01 240);
                --key-alpha-fg: oklch(0.25 0.05 240);

                --key-mod-base: oklch(0.8 0.08 240);
                --key-mod-top: oklch(0.88 0.1 240);
                --key-mod-fg: oklch(0.25 0.05 240);

                --key-accent-base: oklch(0.2 0.12 255);
                --key-accent-top: oklch(0.3 0.12 255);
                --key-accent-fg: oklch(0.98 0.01 240);

                --led-active: oklch(0.6 0.2 250);
                --label-stealth: oklch(0.6 0.01 240);

                /* RGB Animation Variables */
                --rgb-speed: 6s;
            }

            [data-theme="dark"] {
                --bg-canvas: #0a0c10;
                --mesh-1: #1a1c24;
                --mesh-2: #0f172a;
                --mesh-3: #1e293b;

                --mat-case-base: oklch(0.12 0.02 240);
                --mat-case-slope: oklch(0.18 0.02 240);
                --mat-case-bezel: oklch(0.28 0.02 240);
                --mat-plate-inner: oklch(0.08 0.02 240);

                --key-alpha-base: oklch(0.35 0.03 240);
                --key-alpha-top: oklch(0.42 0.03 240);
                --key-alpha-fg: oklch(0.95 0.01 240);

                --key-mod-base: oklch(0.25 0.08 240);
                --key-mod-top: oklch(0.32 0.1 240);
                --key-mod-fg: oklch(0.95 0.01 240);

                --key-accent-base: oklch(0.1 0.1 255);
                --key-accent-top: oklch(0.18 0.1 255);
                --key-accent-fg: oklch(0.9 0.05 240);

                --led-active: oklch(0.9 0.1 190);
                --label-stealth: oklch(0.4 0.01 240);
            }

            /* --- 2. DYNAMIC BACKGROUND --- */
            body {
                background-color: var(--bg-canvas);
                position: relative;
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                font-family: 'Inter', sans-serif;
                overflow: hidden;
                transition: background-color 1.2s ease;
            }

            .bg-studio {
                position: fixed;
                inset: 0;
                z-index: -1;
                background: radial-gradient(at 0% 0%, var(--mesh-1) 0px, transparent 50%), radial-gradient(at 100% 0%, var(--mesh-2) 0px, transparent 50%), radial-gradient(at 100% 100%, var(--mesh-3) 0px, transparent 50%), radial-gradient(at 0% 100%, var(--mesh-2) 0px, transparent 50%);
                filter: blur(40px);
                opacity: 0.6;
            }

            .bg-noise {
                position: fixed;
                inset: 0;
                z-index: -1;
                background-image: url("https://www.transparenttextures.com/patterns/stardust.png");
                opacity: 0.15;
                pointer-events: none;
            }

            /* --- 3. CHASSIS --- */
            .chassis-housing {
                background-color: var(--mat-case-base);
                padding: 10px;
                border-radius: var(--radius-case);
                position: relative;
                box-shadow: 0 0 80px rgba(0,0,0,0.2);
            }

            .angled-slope {
                background-color: var(--mat-case-slope);
                padding: 8px;
                border-radius: 26px;
                box-shadow: inset 0 0 12px rgba(0,0,0,0.1);
            }

            .bezel-frame {
                background-color: var(--mat-case-bezel);
                padding: 12px 16px;
                border-radius: 20px;
                position: relative;
                box-shadow: 0 6px 15px rgba(0,0,0,0.1);
            }

            .inner-plate {
                background-color: var(--mat-plate-inner);
                padding: 8px;
                border-radius: 10px;
                box-shadow: inset 0 0 20px rgba(0,0,0,0.45);
                overflow: hidden;
            }

            /* --- 4. RGB & KEYCAP ELEMENTS --- */
            .row {
                display: flex;
                gap: var(--gap);
                margin-bottom: var(--gap);
            }

            .key {
                height: 52px;
                position: relative;
                border: none;
                cursor: pointer;
                outline: none;
                border-radius: var(--radius-key);
                background-color: var(--key-base);
                overflow: visible;
                /* Biarkan glow merembes keluar gap */
                transition: transform 0.05s ease;
            }

            /* Efek Sinar di Sela-sela Tombol */
            .key-glow {
                position: absolute;
                inset: -2px;
                /* Merembes sedikit ke sela gap */
                background: conic-gradient(from 0deg, #ff0000, #ff8000, #ffff00, #00ff00, #00ffff, #0000ff, #8000ff, #ff00ff, #ff0000);
                filter: blur(10px);
                border-radius: var(--radius-key);
                opacity: 0.4;
                z-index: 1;
                animation: rotateRGB var(--rgb-speed) linear infinite;
            }

            [data-theme="dark"] .key-glow {
                opacity: 0.7;
                /* Lebih terang di mode gelap */
                filter: blur(12px);
            }

            @keyframes rotateRGB {
                from {
                    filter: blur(10px) hue-rotate(0deg);
                }
                to {
                    filter: blur(10px) hue-rotate(360deg);
                }
            }

            .key-top {
                position: absolute;
                inset: 3px;
                /* Jarak agar glow terlihat di pinggiran */
                border-radius: calc(var(--radius-key) - 1px);
                background-color: var(--key-top);
                color: var(--key-fg);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                font-family: 'JetBrains Mono', monospace;
                font-weight: 700;
                box-shadow: inset 0 1px 2px rgba(255,255,255,0.1), 0 2px 4px rgba(0,0,0,0.2);
                z-index: 3;
                transition: all 0.05s ease;
            }

            .key-label {
                font-size: 11px;
            }
            .key-icon {
                font-size: 14px;
                margin-bottom: 2px;
            }
            .type-mod .key-label {
                font-size: 8.5px;
                font-weight: 800;
            }

            .type-alpha {
                --key-base: var(--key-alpha-base);
                --key-top: var(--key-alpha-top);
                --key-fg: var(--key-alpha-fg);
            }
            .type-mod {
                --key-base: var(--key-mod-base);
                --key-top: var(--key-mod-top);
                --key-fg: var(--key-mod-fg);
            }
            .type-accent {
                --key-base: var(--key-accent-base);
                --key-top: var(--key-accent-top);
                --key-fg: var(--key-accent-fg);
            }

            /* Tekanan Tombol menutupi glow sedikit lebih banyak */
            .key.active {
                transform: scale(0.96);
            }
            .key.active .key-top {
                filter: brightness(0.85);
                transform: translateY(1px);
            }

            /* --- 5. INDICATOR --- */
            .indicator-plate {
                position: absolute;
                left: 6px;
                top: 38px;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 3px;
            }
            .led-line {
                width: 8px;
                height: 2px;
                border-radius: 1px;
                background-color: oklch(from var(--mat-case-bezel) calc(l - 0.3) c h);
            }
            .caps-on .led-line {
                background-color: var(--led-active);
                box-shadow: 0 0 10px var(--led-active);
            }
            .led-label {
                font-size: 7px;
                font-weight: 900;
                color: var(--label-stealth);
                font-family: 'JetBrains Mono', monospace;
                opacity: 0.6;
            }

            /* Utilities */
            .w-1u {
                width: var(--u);
            }
            .w-1-25u {
                width: calc(var(--u) * 1.25 + var(--gap) * 0.25);
            }
            .w-1-5u {
                width: calc(var(--u) * 1.5 + var(--gap) * 0.5);
            }
            .w-1-75u {
                width: calc(var(--u) * 1.75 + var(--gap) * 0.75);
            }
            .w-2u {
                width: calc(var(--u) * 2 + var(--gap));
            }
            .w-2-25u {
                width: calc(var(--u) * 2.25 + var(--gap) * 1.25);
            }
            .w-flex {
                flex: 1;
            }

            .sub {
                position: absolute;
                top: 3px;
                left: 6px;
                font-size: 8px;
                opacity: 0.5;
                pointer-events: none;
            }

            #theme-toggle {
                position: fixed;
                bottom: 30px;
                right: 30px;
                padding: 12px 24px;
                border-radius: 40px;
                background: var(--mat-case-bezel);
                color: var(--key-alpha-fg);
                border: 2px solid var(--mat-case-outer);
                font-weight: 800;
                font-size: 11px;
                cursor: pointer;
                z-index: 100;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
            }
        </style>
    </head>
    <body data-theme="light">

        <div class="bg-studio"></div>
        <div class="bg-noise"></div>

        <button id="theme-toggle">TOGGLE ATMOSPHERE</button>

        <div class="chassis-housing" id="main-shell">
            <div class="angled-slope">
                <div class="bezel-frame">
                    <div class="indicator-plate" id="caps-group">
                        <div class="led-line"></div>
                        <div class="led-label">C</div>
                    </div>
                    <div class="inner-plate">
                        <div id="kb-case"></div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const themeBtn = document.getElementById('theme-toggle');
            themeBtn.onclick = () => {
                const current = document
                    .body
                    .getAttribute('data-theme');
                document
                    .body
                    .setAttribute(
                        'data-theme', current === 'light'
                        ? 'dark'
                        : 'light');
            };

            const audioCtx = new(window.AudioContext || window.webkitAudioContext)();
            function playThock(isSpace = false) {
                if (audioCtx.state === 'suspended') 
                    audioCtx.resume();
                const now = audioCtx.currentTime;
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                osc.type = 'triangle';
                osc
                    .frequency
                    .setValueAtTime(
                        isSpace
                        ? 70
                        : 105,
                    now);
                osc
                    .frequency
                    .exponentialRampToValueAtTime(30, now + 0.1);
                filter.type = 'lowpass';
                filter.frequency.value = isSpace
                    ? 300
                    : 550;
                gain
                    .gain
                    .setValueAtTime(0.2, now);
                gain
                    .gain
                    .exponentialRampToValueAtTime(0.01, now + 0.12);
                osc.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start();
                osc.stop(now + 0.12);
            }

            const layoutData = [
                [
                    {
                        l: 'ESC',
                        c: 'Escape',
                        t: 'type-accent',
                        w: 'w-1u'
                    }, {
                        l: '1',
                        s: '!',
                        c: 'Digit1',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '2',
                        s: '@',
                        c: 'Digit2',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '3',
                        s: '#',
                        c: 'Digit3',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '4',
                        s: '$',
                        c: 'Digit4',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '5',
                        s: '%',
                        c: 'Digit5',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '6',
                        s: '^',
                        c: 'Digit6',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '7',
                        s: '&',
                        c: 'Digit7',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '8',
                        s: '*',
                        c: 'Digit8',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '9',
                        s: '(',
                        c: 'Digit9',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '0',
                        s: ')',
                        c: 'Digit10',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '-',
                        s: '_',
                        c: 'Minus',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '=',
                        s: '+',
                        c: 'Equal',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        i: '⌫',
                        l: 'BACK',
                        c: 'Backspace',
                        t: 'type-mod',
                        w: 'w-2u'
                    }, {
                        l: 'HOME',
                        c: 'Home',
                        t: 'type-mod',
                        w: 'w-1u'
                    }
                ],
                [
                    {
                        i: '⇥',
                        l: 'TAB',
                        c: 'Tab',
                        t: 'type-mod',
                        w: 'w-1-5u'
                    }, {
                        l: 'Q',
                        c: 'KeyQ',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'W',
                        c: 'KeyW',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'E',
                        c: 'KeyE',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'R',
                        c: 'KeyR',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'T',
                        c: 'KeyT',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'Y',
                        c: 'KeyY',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'U',
                        c: 'KeyU',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'I',
                        c: 'KeyI',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'O',
                        c: 'KeyO',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'P',
                        c: 'KeyP',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '[',
                        s: '{',
                        c: 'BracketLeft',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: ']',
                        s: '}',
                        c: 'BracketRight',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '\\',
                        s: '|',
                        c: 'Backslash',
                        t: 'type-alpha',
                        w: 'w-1-5u'
                    }, {
                        l: 'DEL',
                        c: 'Delete',
                        t: 'type-mod',
                        w: 'w-1u'
                    }
                ],
                [
                    {
                        i: '⇪',
                        l: 'CAPS',
                        c: 'CapsLock',
                        t: 'type-mod',
                        w: 'w-1-75u'
                    }, {
                        l: 'A',
                        c: 'KeyA',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'S',
                        c: 'KeyS',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'D',
                        c: 'KeyD',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'F',
                        c: 'KeyF',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'G',
                        c: 'KeyG',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'H',
                        c: 'KeyH',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'J',
                        c: 'KeyJ',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'K',
                        c: 'KeyK',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'L',
                        c: 'KeyL',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: ';',
                        s: ':',
                        c: 'Semicolon',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: "'",
                        s: '"',
                        c: 'Quote',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        i: '⏎',
                        l: 'ENTER',
                        c: 'Enter',
                        t: 'type-accent',
                        w: 'w-2-25u'
                    }, {
                        l: 'PGUP',
                        c: 'PageUp',
                        t: 'type-mod',
                        w: 'w-1u'
                    }
                ],
                [
                    {
                        i: '⇧',
                        l: 'SHIFT',
                        c: 'ShiftLeft',
                        t: 'type-mod',
                        w: 'w-2-25u'
                    }, {
                        l: 'Z',
                        c: 'KeyZ',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'X',
                        c: 'KeyX',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'C',
                        c: 'KeyC',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'V',
                        c: 'KeyV',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'B',
                        c: 'KeyB',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'N',
                        c: 'KeyN',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'M',
                        c: 'KeyM',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: ',',
                        s: '<',
                        c: 'Comma',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '.',
                        s: '>',
                        c: 'Period',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: '/',
                        s: '?',
                        c: 'Slash',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        i: '⇧',
                        l: 'SHIFT',
                        c: 'ShiftRight',
                        t: 'type-mod',
                        w: 'w-flex'
                    }, {
                        i: '▲',
                        c: 'ArrowUp',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        l: 'PGDN',
                        c: 'PageDown',
                        t: 'type-mod',
                        w: 'w-1u'
                    }
                ],
                [
                    {
                        l: 'CTRL',
                        c: 'ControlLeft',
                        t: 'type-mod',
                        w: 'w-1-25u'
                    }, {
                        i: '⊞',
                        l: 'WIN',
                        c: 'MetaLeft',
                        t: 'type-mod',
                        w: 'w-1u'
                    }, {
                        l: 'ALT',
                        c: 'AltLeft',
                        t: 'type-mod',
                        w: 'w-1-25u'
                    }, {
                        l: '',
                        c: 'Space',
                        t: 'type-accent',
                        w: 'w-flex'
                    }, {
                        l: 'ALT',
                        c: 'AltRight',
                        t: 'type-mod',
                        w: 'w-1-25u'
                    }, {
                        l: 'FN',
                        c: 'Fn',
                        t: 'type-mod',
                        w: 'w-1u'
                    }, {
                        l: 'CTRL',
                        c: 'ControlRight',
                        t: 'type-mod',
                        w: 'w-1u'
                    }, {
                        i: '◀',
                        c: 'ArrowLeft',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        i: '▼',
                        c: 'ArrowDown',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }, {
                        i: '▶',
                        c: 'ArrowRight',
                        t: 'type-alpha',
                        w: 'w-1u'
                    }
                ]
            ];

            const container = document.getElementById('kb-case');
            layoutData.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'row';
                row.forEach(key => {
                    const btn = document.createElement('button');
                    btn.className = `key ${key.t} ${key.w}`;
                    btn.id = key.c;

                    // Tambahkan element Glow untuk RGB
                    const glow = document.createElement('div');
                    glow.className = 'key-glow';

                    const top = document.createElement('div');
                    top.className = 'key-top';

                    if (key.s) {
                        const s = document.createElement('span');
                        s.className = 'sub';
                        s.innerText = key.s;
                        top.appendChild(s);
                    }
                    if (key.i) {
                        const i = document.createElement('span');
                        i.className = 'key-icon';
                        i.innerText = key.i;
                        top.appendChild(i);
                    }
                    if (key.l) {
                        const l = document.createElement('span');
                        l.className = 'key-label';
                        l.innerText = key.l;
                        top.appendChild(l);
                    }

                    btn.appendChild(glow); // Masukkan glow
                    btn.appendChild(top);
                    rowDiv.appendChild(btn);
                });
                container.appendChild(rowDiv);
            });

            const mainShell = document.querySelector('.chassis-housing');
            mainShell.addEventListener('mousedown', (e) => {
                const keyBtn = e
                    .target
                    .closest('.key');
                if (keyBtn) 
                    handlePress(keyBtn.id);
                }
            );

            window.addEventListener('mouseup', () => {
                document
                    .querySelectorAll('.key.active')
                    .forEach(btn => handleRelease(btn.id));
            });

            function handlePress(code) {
                const el = document.getElementById(code);
                if (el && !el.classList.contains('active')) {
                    el
                        .classList
                        .add('active');
                    playThock(code === 'Space');
                    if (code === 'CapsLock') 
                        document
                            .getElementById('caps-group')
                            .classList
                            .toggle('caps-on');
                    }
                }

            function handleRelease(code) {
                const el = document.getElementById(code);
                if (el) 
                    el
                        .classList
                        .remove('active');
                }
            
            window.addEventListener('keydown', e => {
                if ([
                    'Tab',
                    'Alt',
                    'Meta',
                    'ArrowUp',
                    'ArrowDown',
                    'ArrowLeft',
                    'ArrowRight',
                    'Delete',
                    'PageUp',
                    'PageDown',
                    'Home',
                    ' '
                ].includes(e.key)) 
                    e.preventDefault();
                handlePress(e.code);
            });
            window.addEventListener('keyup', e => handleRelease(e.code));
        </script>
    </body>
</html>