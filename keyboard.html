<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>CORE-65 | Top-Left Indicator Edition</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@600;800&family=Inter:wght@400;700;800&display=swap');
            :root {
                --u: 52px;
                --gap: 5px;
                /* Light Mode - CNC Silver */
                --bg-base: #d1cfcd;
                --case-outer: oklch(0.82 0.01 240);
                --case-slope: oklch(0.88 0.01 240);
                --case-bezel: oklch(0.94 0.01 240);
                --case-inner: oklch(0.97 0.01 240);
                --key-white: oklch(0.99 0.01 240);
                --key-blue: oklch(0.92 0.04 230);
                --key-navy: oklch(0.28 0.05 240);
                --text-main: oklch(0.25 0.05 240);
                --inner-scoop: inset 0 6px 12px oklch(0 0 0 / 0.08), inset 0 -2px 4px oklch(1 0 0 / 0.8);
                --led-on: oklch(0.98 0.02 240);
                --fixed-c: oklch(0.65 0.01 240);
                --shadow-intensity: 0.4;
            }

            [data-theme="dark"] {
                /* Dark Mode - Obsidian Slate */
                --bg-base: #080c14;
                --case-outer: oklch(0.12 0.02 240);
                --case-slope: oklch(0.18 0.02 240);
                --case-bezel: oklch(0.26 0.02 240);
                --case-inner: oklch(0.22 0.02 240);
                --key-white: oklch(0.42 0.03 240);
                --key-blue: oklch(0.32 0.07 240);
                --key-navy: oklch(0.14 0.05 240);
                --text-main: oklch(0.92 0.01 240);
                --led-on: oklch(0.95 0.02 240);
                --fixed-c: oklch(0.45 0.01 240);
                --shadow-intensity: 0.9;
            }

            body {
                margin: 0;
                padding: 0;
                background-color: var(--bg-base);
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                font-family: 'Inter', sans-serif;
                user-select: none;
                overflow: hidden;
                transition: background-color 0.8s ease;
            }

            .bg-layer {
                position: fixed;
                inset: 0;
                pointer-events: none;
                z-index: -1;
                transition: opacity 0.8s ease;
            }
            .bg-wood {
                background-image: url("https://www.transparenttextures.com/patterns/wood-pattern.png");
                background-color: oklch(0.95 0.02 70 / 0.3);
                opacity: 1;
            }
            .bg-carbon {
                background-image: url("https://www.transparenttextures.com/patterns/carbon-fibre.png");
                background-blend-mode: overlay;
                opacity: 0;
            }
            [data-theme="dark"] .bg-wood {
                opacity: 0;
            }
            [data-theme="dark"] .bg-carbon {
                opacity: 1;
            }

            /* LAYER 1: BASE */
            .chassis-housing {
                background-color: var(--case-outer);
                padding: 4px;
                border-radius: 32px;
                box-shadow: 0 50px 100px -20px oklch(0 0 0 / var(--shadow-intensity)), 0 16px 0 oklch(from var(--case-outer) calc(l - 0.15) c h);
            }

            /* LAYER 2: SLOPE */
            .angled-slope {
                background-color: var(--case-slope);
                padding: 8px;
                border-radius: 28px;
                box-shadow: inset 0 4px 8px oklch(0 0 0 / 0.12);
            }

            /* LAYER 3: BEZEL FRAME */
            .bezel-frame {
                background-color: var(--case-bezel);
                padding: 10px 15px;
                border-radius: 20px;
                box-shadow: 0 8px 20px oklch(0 0 0 / 0.3), inset 0 1px 1px oklch(1 0 0 / 0.5);
                position: relative;
            }

            /* LAYER 4: INDICATOR (POSISI KIRI ATAS - Sejajar Esc) */
            .indicator-plate {
                position: absolute;
                left: 4px;
                top: 36px;
                /* Posisi naik sejajar dengan baris pertama (Esc) */
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 3px;
            }
            .led-line {
                width: 8px;
                height: 2px;
                border-radius: 1px;
                background-color: oklch(from var(--case-bezel) calc(l - 0.25) c h);
                transition: all 0.3s ease;
            }
            .caps-on .led-line {
                background-color: var(--led-on);
                box-shadow: 0 0 6px var(--led-on);
            }
            .led-label {
                font-size: 7px;
                font-weight: 900;
                color: var(--fixed-c);
                font-family: 'JetBrains Mono', monospace;
            }

            /* LAYER 5: INNER PLATE */
            .inner-plate {
                background-color: var(--case-inner);
                padding: 8px;
                border-radius: 12px;
                box-shadow: inset 0 2px 5px oklch(0 0 0 / 0.2);
            }

            .row {
                display: flex;
                gap: var(--gap);
                margin-bottom: var(--gap);
            }
            .row:last-child {
                margin-bottom: 0;
            }

            /* KEYCAPS */
            .key {
                height: 52px;
                border-radius: 6px;
                border: none;
                cursor: pointer;
                font-family: 'JetBrains Mono', monospace;
                font-weight: 800;
                font-size: 11px;
                position: relative;
                transition: background-color 0.5s ease, color 0.5s ease, transform 0.07s cubic-bezier(0.2, 1, 0.3, 1);
                display: flex;
                align-items: center;
                justify-content: center;
                outline: none;
                box-shadow: var(--inner-scoop);
                background-image: radial-gradient(circle at center, oklch(1 0 0 / 0.01) 0%, transparent 100%);
            }

            .navy {
                background-color: var(--key-navy);
                color: #f8fafc;
            }
            .blue {
                background-color: var(--key-blue);
                color: oklch(from var(--key-blue) calc(l - 0.5) calc(c + 0.1) h);
                text-transform: uppercase;
                font-size: 8px;
            }
            .white {
                background-color: var(--key-white);
                color: var(--text-main);
            }

            .key.active {
                transform: scale(0.96) translateY(4px) !important;
                filter: brightness(0.9);
                box-shadow: inset 0 4px 8px oklch(0 0 0 / 0.4) !important;
            }

            /* Widths */
            .w-1u {
                width: var(--u);
            }
            .w-1-25u {
                width: calc(var(--u) * 1.25 + var(--gap) * 0.25);
            }
            .w-1-5u {
                width: calc(var(--u) * 1.5 + var(--gap) * 0.5);
            }
            .w-1-75u {
                width: calc(var(--u) * 1.75 + var(--gap) * 0.75);
            }
            .w-2u {
                width: calc(var(--u) * 2 + var(--gap));
            }
            .w-2-25u {
                width: calc(var(--u) * 2.25 + var(--gap) * 1.25);
            }
            .w-flex {
                flex: 1;
            }

            .sub {
                position: absolute;
                top: 4px;
                left: 6px;
                font-size: 8px;
                opacity: 0.5;
                pointer-events: none;
            }

            #theme-toggle {
                position: fixed;
                top: 30px;
                right: 30px;
                padding: 10px 22px;
                border-radius: 40px;
                background: var(--case-bezel);
                color: var(--text-main);
                border: 2px solid var(--case-outer);
                font-weight: 800;
                font-size: 11px;
                cursor: pointer;
                z-index: 100;
                box-shadow: 0 10px 20px -5px rgba(0,0,0,0.4);
            }
        </style>
    </head>
    <body data-theme="light">

        <div class="bg-layer bg-wood"></div>
        <div class="bg-layer bg-carbon"></div>

        <button id="theme-toggle">SWITCH TO DARK</button>

        <div class="chassis-housing" id="main-shell">
            <div class="angled-slope">
                <div class="bezel-frame">
                    <div class="indicator-plate" id="caps-group">
                        <div class="led-line"></div>
                        <div class="led-label">C</div>
                    </div>

                    <div class="inner-plate">
                        <div id="kb-case"></div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const themeBtn = document.getElementById('theme-toggle');
            themeBtn.onclick = () => {
                const current = document
                    .body
                    .getAttribute('data-theme');
                const target = current === 'light'
                    ? 'dark'
                    : 'light';
                document
                    .body
                    .setAttribute('data-theme', target);
                themeBtn.innerText = target === 'light'
                    ? 'SWITCH TO DARK'
                    : 'SWITCH TO LIGHT';
            };

            const audioCtx = new(window.AudioContext || window.webkitAudioContext)();
            function playThock(isSpace = false) {
                if (audioCtx.state === 'suspended') 
                    audioCtx.resume();
                const now = audioCtx.currentTime;
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                osc.type = 'triangle';
                osc
                    .frequency
                    .setValueAtTime(
                        isSpace
                        ? 72
                        : 108,
                    now);
                osc
                    .frequency
                    .exponentialRampToValueAtTime(30, now + 0.12);
                filter.type = 'lowpass';
                filter.frequency.value = isSpace
                    ? 320
                    : 580;
                gain
                    .gain
                    .setValueAtTime(0.25, now);
                gain
                    .gain
                    .exponentialRampToValueAtTime(0.01, now + 0.15);
                osc.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start();
                osc.stop(now + 0.15);
            }

            const layoutData = [
                [
                    {
                        l: 'Esc',
                        c: 'Escape',
                        t: 'navy',
                        w: 'w-1u'
                    }, {
                        l: '1',
                        s: '!',
                        c: 'Digit1',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '2',
                        s: '@',
                        c: 'Digit2',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '3',
                        s: '#',
                        c: 'Digit3',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '4',
                        s: '$',
                        c: 'Digit4',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '5',
                        s: '%',
                        c: 'Digit5',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '6',
                        s: '^',
                        c: 'Digit6',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '7',
                        s: '&',
                        c: 'Digit7',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '8',
                        s: '*',
                        c: 'Digit8',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '9',
                        s: '(',
                        c: 'Digit9',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '0',
                        s: ')',
                        c: 'Digit10',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '-',
                        s: '_',
                        c: 'Minus',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '=',
                        s: '+',
                        c: 'Equal',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'Bksp',
                        c: 'Backspace',
                        t: 'blue',
                        w: 'w-2u'
                    }, {
                        l: 'Hm',
                        c: 'Home',
                        t: 'blue',
                        w: 'w-1u'
                    }
                ],
                [
                    {
                        l: 'Tab',
                        c: 'Tab',
                        t: 'blue',
                        w: 'w-1-5u'
                    }, {
                        l: 'Q',
                        c: 'KeyQ',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'W',
                        c: 'KeyW',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'E',
                        c: 'KeyE',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'R',
                        c: 'KeyR',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'T',
                        c: 'KeyT',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'Y',
                        c: 'KeyY',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'U',
                        c: 'KeyU',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'I',
                        c: 'KeyI',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'O',
                        c: 'KeyO',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'P',
                        c: 'KeyP',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '[',
                        s: '{',
                        c: 'BracketLeft',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: ']',
                        s: '}',
                        c: 'BracketRight',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '\\',
                        s: '|',
                        c: 'Backslash',
                        t: 'white',
                        w: 'w-1-5u'
                    }, {
                        l: 'Del',
                        c: 'Delete',
                        t: 'blue',
                        w: 'w-1u'
                    }
                ],
                [
                    {
                        l: 'Caps',
                        c: 'CapsLock',
                        t: 'blue',
                        w: 'w-1-75u'
                    }, {
                        l: 'A',
                        c: 'KeyA',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'S',
                        c: 'KeyS',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'D',
                        c: 'KeyD',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'F',
                        c: 'KeyF',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'G',
                        c: 'KeyG',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'H',
                        c: 'KeyH',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'J',
                        c: 'KeyJ',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'K',
                        c: 'KeyK',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'L',
                        c: 'KeyL',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: ';',
                        s: ':',
                        c: 'Semicolon',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: "'",
                        s: '"',
                        c: 'Quote',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'Enter',
                        c: 'Enter',
                        t: 'navy',
                        w: 'w-2-25u'
                    }, {
                        l: 'PgU',
                        c: 'PageUp',
                        t: 'blue',
                        w: 'w-1u'
                    }
                ],
                [
                    {
                        l: 'Shift',
                        c: 'ShiftLeft',
                        t: 'blue',
                        w: 'w-2-25u'
                    }, {
                        l: 'Z',
                        c: 'KeyZ',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'X',
                        c: 'KeyX',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'C',
                        c: 'KeyC',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'V',
                        c: 'KeyV',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'B',
                        c: 'KeyB',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'N',
                        c: 'KeyN',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'M',
                        c: 'KeyM',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: ',',
                        s: '<',
                        c: 'Comma',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '.',
                        s: '>',
                        c: 'Period',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '/',
                        s: '?',
                        c: 'Slash',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'Shift',
                        c: 'ShiftRight',
                        t: 'blue',
                        w: 'w-flex'
                    }, {
                        l: '▲',
                        c: 'ArrowUp',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: 'PgD',
                        c: 'PageDown',
                        t: 'blue',
                        w: 'w-1u'
                    }
                ],
                [
                    {
                        l: 'Ctrl',
                        c: 'ControlLeft',
                        t: 'blue',
                        w: 'w-1-25u'
                    }, {
                        l: 'Win',
                        c: 'MetaLeft',
                        t: 'blue',
                        w: 'w-1u'
                    }, {
                        l: 'Alt',
                        c: 'AltLeft',
                        t: 'blue',
                        w: 'w-1-25u'
                    }, {
                        l: '',
                        c: 'Space',
                        t: 'navy',
                        w: 'w-flex'
                    }, {
                        l: 'Alt',
                        c: 'AltRight',
                        t: 'blue',
                        w: 'w-1-25u'
                    }, {
                        l: 'Fn',
                        c: 'Fn',
                        t: 'blue',
                        w: 'w-1u'
                    }, {
                        l: 'Ctrl',
                        c: 'ControlRight',
                        t: 'blue',
                        w: 'w-1u'
                    }, {
                        l: '◀',
                        c: 'ArrowLeft',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '▼',
                        c: 'ArrowDown',
                        t: 'white',
                        w: 'w-1u'
                    }, {
                        l: '▶',
                        c: 'ArrowRight',
                        t: 'white',
                        w: 'w-1u'
                    }
                ]
            ];

            const container = document.getElementById('kb-case');
            layoutData.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'row';
                row.forEach(key => {
                    const btn = document.createElement('button');
                    btn.className = `key ${key.t} ${key.w}`;
                    btn.id = key.c;
                    if (key.s) {
                        const s = document.createElement('span');
                        s.className = 'sub';
                        s.innerText = key.s;
                        btn.appendChild(s);
                    }
                    const l = document.createElement('span');
                    l.innerText = key.l;
                    btn.appendChild(l);
                    rowDiv.appendChild(btn);
                });
                container.appendChild(rowDiv);
            });

            const mainShell = document.getElementById('main-shell');
            mainShell.addEventListener('mousedown', (e) => {
                const keyBtn = e
                    .target
                    .closest('.key');
                if (keyBtn) 
                    handlePress(keyBtn.id);
                }
            );

            window.addEventListener('mouseup', () => {
                document
                    .querySelectorAll('.key.active')
                    .forEach(btn => handleRelease(btn.id));
            });

            function handlePress(code) {
                const el = document.getElementById(code);
                if (el && !el.classList.contains('active')) {
                    el
                        .classList
                        .add('active');
                    playThock(code === 'Space');
                    if (code === 'CapsLock') 
                        document
                            .getElementById('caps-group')
                            .classList
                            .toggle('caps-on');
                    }
                }
            function handleRelease(code) {
                const el = document.getElementById(code);
                if (el) 
                    el
                        .classList
                        .remove('active');
                }
            
            window.addEventListener('keydown', e => {
                if ([
                    'Tab',
                    'Alt',
                    'Meta',
                    'ArrowUp',
                    'ArrowDown',
                    'ArrowLeft',
                    'ArrowRight',
                    'Delete',
                    'PageUp',
                    'PageDown',
                    'Home',
                    ' '
                ].includes(e.key)) 
                    e.preventDefault();
                handlePress(e.code);
            });
            window.addEventListener('keyup', e => handleRelease(e.code));
        </script>
    </body>
</html>