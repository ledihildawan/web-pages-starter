<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="{{ title or 'App' }}" />
    <meta name="color-scheme" content="light dark" />

    <title>{{ title or 'App' }}</title>

    <link rel="stylesheet" href="/styles/main.css" />
    {%- block styles %}{% endblock %}
</head>
<body class="min-h-screen bg-background text-foreground antialiased">
    <div id="app">
        <nav class="fixed top-0 right-0 left-0 z-50 px-4 py-3 border-b border-border bg-background/80 backdrop-blur-sm">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <a href="/" class="text-sm font-semibold text-foreground">
                    {{ title or 'App' }}
                </a>
                <div class="flex items-center gap-4">
                    <!-- New i18n Language Switcher -->
                    <div x-data="i18n" class="flex items-center gap-2">
                        <template x-for="locale in availableLocales" :key="locale">
                            <a
                                :href="languageSwitcher[locale]"
                                class="inline-flex items-center justify-center w-8 h-8 rounded-md hover:bg-muted transition-colors"
                                :class="{ 'bg-muted ring-2 ring-primary': locale === currentLocale }"
                                :aria-label="`Switch to ${locale}`"
                            >
                                <template x-if="locale === 'en'">
                                    <span class="text-sm">ğŸ‡¬ğŸ‡§</span>
                                </template>
                                <template x-if="locale === 'id'">
                                    <span class="text-sm">ğŸ‡®ğŸ‡©</span>
                                </template>
                                <template x-if="locale === 'fr'">
                                    <span class="text-sm">ğŸ‡«ğŸ‡·</span>
                                </template>
                            </a>
                        </template>
                    </div>

                    <!-- Theme Toggle -->
                    <div x-data="app">
                        <button
                            @click="toggleTheme()"
                            class="inline-flex items-center justify-center w-8 h-8 rounded-md hover:bg-muted transition-colors"
                            :aria-label="theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'"
                        >
                            <span x-show="theme === 'dark'" class="text-sm">â˜€ï¸</span>
                            <span x-show="theme === 'light'" class="text-sm">ğŸŒ™</span>
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <main class="pt-16">
            {%- block content %}{% endblock %}
        </main>
    </div>

    <script defer src="/scripts/main.ts"></script>
    {%- block scripts %}{% endblock %}
</body>
</html>
