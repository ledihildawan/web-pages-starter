# Apache Configuration for MPA Mode (.htaccess)
# Place this file in your /dist directory
# This configuration serves multiple HTML files with .html extension handling

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Enable gzip compression
  <IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
  </IfModule>

  # Set cache headers for static assets
  <IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/ico "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType application/font-woff "access plus 1 year"
    ExpiresByType application/font-woff2 "access plus 1 year"
  </IfModule>

  # Remove .html extension from URLs (optional - clean URLs)
  # Uncomment the following lines to use clean URLs like /about instead of /about.html
  # RewriteCond %{THE_REQUEST} /([^.]+)\.html [NC]
  # RewriteRule ^ /%1 [L,R=301]

  # Rewrite clean URLs to .html files
  # Uncomment the following lines to enable clean URL handling
  # RewriteCond %{REQUEST_FILENAME} !-f
  # RewriteCond %{REQUEST_FILENAME} !-d
  # RewriteCond %{REQUEST_FILENAME}.html -f
  # RewriteRule ^(.*)$ $1.html [L]

  # Handle language-specific routes with .html
  # /en/about serves /en/about.html
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(id|en)/(.*)$ $1/$2.html [L]

  # Root routes without .html extension (if using clean URLs)
  # Uncomment if you want /about to serve about.html
  # RewriteCond %{REQUEST_FILENAME} !-f
  # RewriteCond %{REQUEST_FILENAME} !-d
  # RewriteCond %{REQUEST_FILENAME}.html -f
  # RewriteRule ^(.*)$ $1.html [L]
</IfModule>

# Security headers
<IfModule mod_headers.c>
  Header always set X-Frame-Options "SAMEORIGIN"
  Header always set X-Content-Type-Options "nosniff"
  Header always set X-XSS-Protection "1; mode=block"
  Header always set Referrer-Policy "no-referrer-when-downgrade"
</IfModule>

# Directory index
DirectoryIndex index.html
